<div class="container mt-5">
  <h2 class="topic">ユーザー詳細</h2>
    <% if current_user == @user %>
    <div class="text-right">
      <%= link_to "編集する", edit_user_path, class:"btn btn-outline-success" %>
    </div><% end %>
    <table class="table">
      <tr>
        <th>プロフィール画像</th>
        <td><%= attachment_image_tag(@user, :profile_image, :fill, 100, 100, fallback: "no_image.jpg", size: "100x100", class:"rounded-circle") %></td>
      </tr>
      <tr>
        <th>ニックネーム</th>
        <td><%= @user.name %></td>
      </tr>
      <tr>
        <th>メールアドレス</th>
        <td><%= @user.email %></td>
      </tr>
      <tr>
        <th>登録日</th>
        <td><%= @user.created_at.strftime('%Y/%m/%d') %></td>
      </tr>
    </table>

   <h2 class="topic mt-5">ユーザートピック</h2>
     <table class="table">
       <thead>
        <tr>
          <th>No.</th>
          <th>投稿日</th>
          <th>タイトル</th>
          <th>本文</th>
          <th>年齢別</th>
          <th>カテゴリー</th>
          <th>コメント数</th>
          <th>いいね数</th>
          <th></th>
        </tr>
       </thead>
       <tbody>
        <% @topics.each do |topic| %>
        <tr>
          <td>
            <%= topic.id %>
          </td>
          <td>
           <%= topic.created_at.strftime('%Y/%m/%d') %>
          </td>
          <td>
            <%= link_to topic_path(topic) do %>
          　<%= topic.title %>
            <% end %>
          </td>
          <td>
            <%= topic.body %>
          </td>
          <td>
            <%= topic.age.name %>
          </td>
          <td>
            <%= topic.category.name %>
          </td>
          <td>
            <%= topic.comments.count %>
          </td>
          <td>
            <%= topic.favorites.count %>
          </td>
          <% if current_user == @user %>
          <td>
            <%= link_to "削除", admin_comment_path(topic), method: :delete, class:"btn btn-danger",data: { confirm: '本当に消しますか？'} %>
          </td><% end %>
        </tr>
        <% end %>
       </tbody>
     </table>

  <h2 class="topic mt-5">ユーザーコメント</h2>
    <table class="table">
     <thead>
      <tr>
       <th>No.</th>
       <th>投稿日</th>
       <th>コメント</th>
       <th>トピックタイトル</th>
       </tr>
      </thead>
      <tbody>
      <% @comments.each do |comment| %>
       <tr>
         <td><%= comment.id %></td>
         <td><%= comment.created_at.strftime('%Y/%m/%d') %></td>
         <td><%= comment.comment %></td>
         <td><%= link_to topic_path(comment.topic) do %>
             <%= comment.topic.title %><% end %></td>
         <td><% if comment.user == current_user %>
             <%= link_to "削除", topic_comment_path(comment.topic, comment), method: :delet, class:"btn btn-danger",data: { confirm: '本当に消しますか？'}  %>
             <% end %></td>
       </tr>
      </tbody><% end %>
    </table>

</div>
